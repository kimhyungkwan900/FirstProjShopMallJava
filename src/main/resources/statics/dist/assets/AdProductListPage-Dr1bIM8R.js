import{r as i,j as e,R as w,A as C}from"./index-DL8XAv-9.js";import{p as I,g as S,d as P}from"./ProductManageApi--0zMNJrN.js";import{P as k}from"./Pagination-RndgT7BH.js";const D=({product:l})=>{const r={id:`${l.id}`,name:`${l.name}`,description:`${l.description}`,price:`${l.price}`,stock:`${l.stock}`,categoryId:`${l.category.id}`,brandId:`${l.brand.id}`,deliveryInfoId:`${l.deliveryInfo.id}`,sellStatus:`${l.sellStatus}`},[n,p]=i.useState({...r}),[x,j]=i.useState([]),h=i.useMemo(()=>{const d=Object.values(n).some(a=>a===""||a==null),u=x.length===0;return!d&&!u},[n,x]),o=d=>{n[d.target.name]=d.target.value,p({...n})},s=d=>{j(Array.from(d.target.files))},v=async d=>{d.preventDefault();const u=new FormData;console.log("product"),console.log(n);for(const a in n)u.append(a,n[a]);for(let a=0;a<x.length;a++)u.append("productImgFile",x[a]);try{const a=await I(u);console.log("result: "),console.log(a),window.location.reload()}catch(a){console.error(a)}};return e.jsxs("div",{className:"",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative mb-4 mr-10 mt-10 flex w-full flex-wrap items-stretch",children:[e.jsx("div",{className:"w-1/5 p-1 text-right font-bold",children:"상품이름"}),e.jsx("input",{className:"w-4/5 p-1 rounded-r border border-solid border-neutral-500 shadow-md",name:"name",type:"text",value:n.name,onChange:o})]})}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative mb-4 mr-10 flex w-full flex-wrap items-stretch",children:[e.jsx("div",{className:"w-1/5 p-1 text-right font-bold",children:"가격"}),e.jsx("input",{className:"w-4/5 p-1 rounded-r border border-solid border-neutral-500 shadow-md",name:"price",type:"text",value:n.price,onChange:o})]})}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative mb-4 mr-10 flex w-full flex-wrap items-stretch",children:[e.jsx("div",{className:"w-1/5 p-5 text-right font-bold",children:"상품 설명"}),e.jsx("input",{className:"w-4/5 p-5 rounded-r border border-solid border-neutral-500 shadow-md",name:"description",type:"text",value:n.description,onChange:o})]})}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative mb-4 mr-10 flex w-full flex-wrap items-stretch",children:[e.jsx("div",{className:"w-1/5 p-1 text-right font-bold",children:"재고"}),e.jsx("input",{className:"w-4/5 p-1 rounded-r border border-solid border-neutral-500 shadow-md",name:"stock",type:"text",value:n.stock,onChange:o})]})}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative mb-4 mr-10 flex w-full flex-wrap items-stretch",children:[e.jsx("div",{className:"w-1/5 p-1 text-right font-bold",children:"카테고리"}),e.jsxs("select",{className:"w-4/5 p-1 rounded-r border border-solid border-neutral-500 shadow-md",name:"categoryId",type:"text",value:n.categoryId,onChange:o,children:[e.jsx("option",{value:"1",children:"패션의류/잡화"}),e.jsx("option",{value:"2",children:"여성의류"}),e.jsx("option",{value:"3",children:"원피스"}),e.jsx("option",{value:"4",children:"블라우스"}),e.jsx("option",{value:"5",children:"니트/스웨터"}),e.jsx("option",{value:"6",children:"트렌치코트"}),e.jsx("option",{value:"7",children:"남성의류"}),e.jsx("option",{value:"8",children:"티셔츠"}),e.jsx("option",{value:"9",children:"맨투맨"}),e.jsx("option",{value:"10",children:"셔츠"}),e.jsx("option",{value:"11",children:"청바지"}),e.jsx("option",{value:"12",children:"패션잡화"}),e.jsx("option",{value:"13",children:"가방"}),e.jsx("option",{value:"14",children:"지갑"}),e.jsx("option",{value:"15",children:"모자"}),e.jsx("option",{value:"16",children:"디지털/가전"}),e.jsx("option",{value:"17",children:"노트북/태블릿"}),e.jsx("option",{value:"18",children:"스마트폰"}),e.jsx("option",{value:"19",children:"이어폰/헤드폰"}),e.jsx("option",{value:"20",children:"모니터"}),e.jsx("option",{value:"21",children:"스마트워치"}),e.jsx("option",{value:"22",children:"뷰티/미용"}),e.jsx("option",{value:"23",children:"스킨케어"}),e.jsx("option",{value:"24",children:"메이크업"}),e.jsx("option",{value:"25",children:"향수"}),e.jsx("option",{value:"26",children:"바디케어"}),e.jsx("option",{value:"27",children:"식품/건강"}),e.jsx("option",{value:"28",children:"신선식품"}),e.jsx("option",{value:"29",children:"과일"}),e.jsx("option",{value:"30",children:"채소"}),e.jsx("option",{value:"31",children:"정육/계란"}),e.jsx("option",{value:"32",children:"가공식품"}),e.jsx("option",{value:"33",children:"간편식"}),e.jsx("option",{value:"34",children:"라면/면류"}),e.jsx("option",{value:"35",children:"과자/간식"}),e.jsx("option",{value:"36",children:"건강기능식품"}),e.jsx("option",{value:"37",children:"생활/주방"}),e.jsx("option",{value:"38",children:"청소용품"}),e.jsx("option",{value:"39",children:"주방용품"}),e.jsx("option",{value:"40",children:"욕실용품"}),e.jsx("option",{value:"41",children:"수납/정리"}),e.jsx("option",{value:"42",children:"유아동"}),e.jsx("option",{value:"43",children:"유아의류"}),e.jsx("option",{value:"44",children:"유아식품"}),e.jsx("option",{value:"45",children:"장난감/완구"}),e.jsx("option",{value:"46",children:"유모차/카시트"})]})]})}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative mb-4 mr-10 flex w-full flex-wrap items-stretch",children:[e.jsx("div",{className:"w-1/5 p-1 text-right font-bold",children:"브랜드"}),e.jsxs("select",{className:"w-4/5 p-1 rounded-r border border-solid border-neutral-500 shadow-md",name:"brandId",type:"text",value:n.brandId,onChange:o,children:[e.jsx("option",{value:"",children:"전체"}),e.jsx("option",{value:"1",children:"아라사카"}),e.jsx("option",{value:"2",children:"밀리테크"}),e.jsx("option",{value:"3",children:"캉 타오"}),e.jsx("option",{value:"4",children:"미드나이트"}),e.jsx("option",{value:"5",children:"말로리안"}),e.jsx("option",{value:"6",children:"테크트로니카"}),e.jsx("option",{value:"7",children:"컨스티튜셔널"}),e.jsx("option",{value:"8",children:"로스토빅"}),e.jsx("option",{value:"9",children:"켄다치"}),e.jsx("option",{value:"10",children:"미니스트릿"}),e.jsx("option",{value:"11",children:"노블리안"}),e.jsx("option",{value:"12",children:"더빈티지"}),e.jsx("option",{value:"13",children:"나이트코프"}),e.jsx("option",{value:"14",children:"어반나이트"}),e.jsx("option",{value:"15",children:"웰메이드"}),e.jsx("option",{value:"16",children:"바이오테크니카"}),e.jsx("option",{value:"17",children:"네오패션"}),e.jsx("option",{value:"18",children:"브루클린웨어"}),e.jsx("option",{value:"19",children:"트렌디코어"}),e.jsx("option",{value:"20",children:"콘페키"})]})]})}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative mb-4 mr-10 flex w-full flex-wrap items-stretch",children:[e.jsx("div",{className:"w-1/5 p-1 text-right font-bold",children:"배송방법"}),e.jsxs("select",{className:"w-4/5 p-1 rounded-r border border-solid border-neutral-500 shadow-md",name:"deliveryInfoId",type:"text",value:n.deliveryInfoId,onChange:o,children:[e.jsx("option",{value:"1",children:"CJ"}),e.jsx("option",{value:"2",children:"로젠"}),e.jsx("option",{value:"3",children:"롯데"}),e.jsx("option",{value:"4",children:"없음"})]})]})}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative mb-4 mr-10 flex w-full flex-wrap items-stretch",children:[e.jsx("div",{className:"w-1/5 p-1 text-right font-bold",children:"판매상태"}),e.jsxs("select",{className:"w-4/5 p-1 rounded-r border border-solid border-neutral-500 shadow-md",name:"sellStatus",type:"text",value:n.sellStatus,onChange:o,children:[e.jsx("option",{value:"판매중",children:"판매중"}),e.jsx("option",{value:"품절",children:"품절"})]})]})}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative mb-4 mr-10 flex w-full flex-wrap items-stretch",children:[e.jsx("div",{className:"w-1/5 p-1 text-right font-bold",children:"상품 이미지"}),e.jsx("input",{className:"w-4/5 p-1 rounded-r border border-solid border-neutral-500 shadow-md",name:"productImgFile",type:"file",multiple:!0,onChange:s})]})}),!h&&e.jsx("div",{className:"text-red-600 text-sm mb-2",children:"모든 필드를 입력하고 최소 1개의 이미지를 선택해주세요."}),e.jsx("div",{className:"flex justify-end",children:e.jsx("div",{className:"relative mb-4 flex p-4 flex-wrap items-stretch",children:e.jsx("button",{type:"button",className:`rounded p-2 w-18 text-white ${h?"bg-blue-500 hover:bg-blue-600":"bg-gray-300 cursor-not-allowed"}`,onClick:v,disabled:!h,children:"수정"})})})]})},F=({searchFilters:l,currentPage:r,onPageChange:n})=>{const[p,x]=i.useState([]),[j,h]=i.useState(1),[o,s]=i.useState([]),[v,d]=i.useState(!1),[u,a]=i.useState(null),m=i.useCallback(async()=>{const t={...l,page:r};try{const c=await S(t);console.log(c),x(c.products.content),h(c.totalPage),s([])}catch(c){console.error("상품 목록 불러오기 실패:",c),x([]),h(1)}},[l,r]);i.useEffect(()=>{m()},[m]);const b=t=>{s(c=>c.includes(t)?c.filter(y=>y!==t):[...c,t]),console.log(o)},f=async()=>{if(o.length!==0)try{const t=await P(o);console.log(t)}catch(t){console.log("상품삭제 실패: ",t)}finally{await m()}},N=t=>{console.log(t),a(t),d(!0)},g=()=>{d(!1),a(null)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col ml-10 mr-10 mt-10 relative",children:[e.jsx("button",{className:"absolute top-0 left-0 bg-gray-400 text-white rounded",onClick:f,disabled:o.length===0,children:"선택 삭제"}),e.jsxs("table",{id:"list",className:"border border-gray-400 mt-8",children:[e.jsxs("tr",{className:"bg-gray-400",children:[e.jsx("th",{}),e.jsx("th",{children:"상품ID"}),e.jsx("th",{children:"상품이름"}),e.jsx("th",{children:"가격"}),e.jsx("th",{children:"재고"}),e.jsx("th",{children:"상태"}),e.jsx("th",{children:"카테고리"}),e.jsx("th",{children:"브랜드"}),e.jsx("th",{children:"조회수"}),e.jsx("th",{children:"등록일"})]}),p.length===0?e.jsx("tr",{}):p.map(t=>e.jsxs("tr",{className:"text-center hover:bg-gray-100 cursor-pointer",onClick:()=>N(t),children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",checked:o.includes(t.id),onClick:c=>c.stopPropagation(),onChange:()=>b(t.id)})}),e.jsx("td",{children:t.id}),e.jsx("td",{children:t.name}),e.jsx("td",{children:t.price.toLocaleString()}),e.jsx("td",{children:t.stock}),e.jsx("td",{children:t.sellStatus}),e.jsx("td",{children:t.category.name}),e.jsx("td",{children:t.brand.name}),e.jsx("td",{children:t.viewCount}),e.jsx("td",{children:new Date(t.regTime).toLocaleDateString()})]},t.id))]}),e.jsx(k,{currentPage:r,totalPages:j,onPageChange:n})]}),e.jsxs(w,{isOpen:v,onRequestClose:g,overlayClassName:"fixed inset-0 bg-black bg-transparent flex justify-center items-center",className:"relative bg-white w-9/20 border rounded-lg overflow-auto mx-auto",style:{content:{top:"1%",left:"1%",right:"1%"}},children:[e.jsx("button",{className:"absolute top-1 right-1 text-5xl text-gray-600 hover:text-gray-900",onClick:g,children:"×"}),u&&e.jsx(D,{product:u})]})]})},L=()=>{const[l,r]=i.useState({productId:"",productName:"",brandName:"",sellStatus:"",categoryId:"",dateType:"",startDate:"",endDate:""}),[n,p]=i.useState(0),[x,j]=i.useState(l),h=()=>{j(l),p(0)},o=s=>{p(s)};return e.jsxs(C,{children:[e.jsxs("div",{className:"space-y-2 ml-10 mt-10",children:["상품번호: ",e.jsx("input",{type:"text",value:l.productId,onChange:s=>r({...l,productId:s.target.value}),className:"border ml-2 p-1"}),e.jsx("br",{}),"상품명: ",e.jsx("input",{type:"text",value:l.productName,onChange:s=>r({...l,productName:s.target.value}),className:"border ml-2 p-1"}),e.jsx("br",{}),"브랜드명: ",e.jsx("input",{type:"text",value:l.brandName,onChange:s=>r({...l,brandName:s.target.value}),className:"border ml-2 p-1"}),e.jsx("br",{}),"판매상태:",e.jsxs("select",{value:l.sellStatus,onChange:s=>r({...l,sellStatus:s.target.value}),className:"border ml-2 p-1",children:[e.jsx("option",{value:"판매중",children:"판매중"}),e.jsx("option",{value:"품절",children:"품절"})]}),"카테고리:",e.jsxs("select",{value:l.categoryId,onChange:s=>r({...l,categoryId:s.target.value}),className:"border ml-2 p-1",children:[e.jsx("option",{value:"1",children:"패션의류/잡화"}),e.jsx("option",{value:"2",children:"여성의류"}),e.jsx("option",{value:"3",children:"원피스"}),e.jsx("option",{value:"4",children:"블라우스"}),e.jsx("option",{value:"5",children:"니트/스웨터"}),e.jsx("option",{value:"6",children:"트렌치코트"}),e.jsx("option",{value:"7",children:"남성의류"}),e.jsx("option",{value:"8",children:"티셔츠"}),e.jsx("option",{value:"9",children:"맨투맨"}),e.jsx("option",{value:"10",children:"셔츠"}),e.jsx("option",{value:"11",children:"청바지"}),e.jsx("option",{value:"12",children:"패션잡화"}),e.jsx("option",{value:"13",children:"가방"}),e.jsx("option",{value:"14",children:"지갑"}),e.jsx("option",{value:"15",children:"모자"}),e.jsx("option",{value:"16",children:"디지털/가전"}),e.jsx("option",{value:"17",children:"노트북/태블릿"}),e.jsx("option",{value:"18",children:"스마트폰"}),e.jsx("option",{value:"19",children:"이어폰/헤드폰"}),e.jsx("option",{value:"20",children:"모니터"}),e.jsx("option",{value:"21",children:"스마트워치"}),e.jsx("option",{value:"22",children:"뷰티/미용"}),e.jsx("option",{value:"23",children:"스킨케어"}),e.jsx("option",{value:"24",children:"메이크업"}),e.jsx("option",{value:"25",children:"향수"}),e.jsx("option",{value:"26",children:"바디케어"}),e.jsx("option",{value:"27",children:"식품/건강"}),e.jsx("option",{value:"28",children:"신선식품"}),e.jsx("option",{value:"29",children:"과일"}),e.jsx("option",{value:"30",children:"채소"}),e.jsx("option",{value:"31",children:"정육/계란"}),e.jsx("option",{value:"32",children:"가공식품"}),e.jsx("option",{value:"33",children:"간편식"}),e.jsx("option",{value:"34",children:"라면/면류"}),e.jsx("option",{value:"35",children:"과자/간식"}),e.jsx("option",{value:"36",children:"건강기능식품"}),e.jsx("option",{value:"37",children:"생활/주방"}),e.jsx("option",{value:"38",children:"청소용품"}),e.jsx("option",{value:"39",children:"주방용품"}),e.jsx("option",{value:"40",children:"욕실용품"}),e.jsx("option",{value:"41",children:"수납/정리"}),e.jsx("option",{value:"42",children:"유아동"}),e.jsx("option",{value:"43",children:"유아의류"}),e.jsx("option",{value:"44",children:"유아식품"}),e.jsx("option",{value:"45",children:"장난감/완구"}),e.jsx("option",{value:"46",children:"유모차/카시트"})]}),e.jsxs("select",{value:l.dateType,onChange:s=>r({...l,dateType:s.target.value}),className:"border ml-2 p-1",children:[e.jsx("option",{value:"등록일",children:"등록일"}),e.jsx("option",{value:"수정일",children:"수정일"})]}),e.jsx("input",{type:"date",value:l.startDate,onChange:s=>r({...l,startDate:s.target.value}),className:"border ml-2 p-1"}),e.jsx("input",{type:"date",value:l.endDate,onChange:s=>r({...l,endDate:s.target.value}),className:"border ml-2 p-1"})]}),e.jsx("button",{className:"bg-blue-500 text-white px-4 py-1 ml-10 rounded",onClick:h,children:"검색"}),e.jsx(F,{searchFilters:x,currentPage:n,onPageChange:o})]})};export{L as default};
