import{a as N,j as e,r as n,R as b,A as y}from"./index-DL8XAv-9.js";import{P as D}from"./Pagination-RndgT7BH.js";const v=async t=>(await N.get("/api/admin/claims",{params:t})).data,_=async t=>(await N.patch("/api/admin/claims/status",t,{withCredentials:!0,headers:{"Content-Type":"application/json"}})).data,f=({claimManage:t})=>{const a={CANCEL_REQUEST:"취소 신청",CANCEL_COMPLETE:"취소 완료",CANCEL_REJECTED:"취소 반려",RETURN_REQUEST:"반품 신청",RETURN_COMPLETE:"반품 완료",RETURN_REJECTED:"반품 반려",EXCHANGE_REQUEST:"교환 신청",EXCHANGE_COMPLETE:"교환 완료",EXCHANGE_REJECTED:"교환 반려"};return e.jsxs("ul",{className:"p-10 ",children:[e.jsxs("li",{className:"mb-2",children:[e.jsx("p",{className:"font-bold",children:"요청ID:"})," ",t.orderReturn.id]}),e.jsxs("li",{className:"mb-2",children:[e.jsx("p",{className:"font-bold",children:"고객ID:"}),": ",t.orderReturn.memberId]}),e.jsxs("li",{className:"mb-2",children:[e.jsx("p",{className:"font-bold",children:"주문ID:"})," ",t.orderReturn.orderId]}),e.jsxs("li",{className:"mb-2",children:[e.jsx("p",{className:"font-bold",children:"요청유형:"})," ",a[t.orderReturn.returnType]??t.orderReturn.returnType]}),e.jsxs("li",{className:"mb-2",children:[e.jsx("p",{className:"font-bold",children:"요청내용:"})," ",t.orderReturn.reason]}),e.jsxs("li",{className:"mb-2",children:[e.jsx("p",{className:"font-bold",children:"요청내용 상세:"})," ",t.orderReturn.detail]})]})},L=({searchFilters:t,currentPage:a,onPageChange:E})=>{const[c,d]=n.useState([]),[u,i]=n.useState(1),[o,l]=n.useState(null),[R,p]=n.useState(!1),[m,x]=n.useState(null),h=n.useCallback(async()=>{const s={...t,page:a};try{const r=await v(s);console.log(r.claims.content),d(r.claims.content),i(r.totalPage),l(null)}catch(r){console.error("고객 요청 목록 불러오기 실패:",r),d([]),i(1)}},[t,a]);n.useEffect(()=>{h()},[h]);const C=async s=>{if(o!==null)try{console.log("선택ID: "+o),console.log("승인여부: "+s);const r=await _({id:o,approval:s});console.log(r)}catch(r){console.log("상태변경 실패: ",r)}finally{await h()}},g=s=>{console.log(s),x(s),p(!0)},j=()=>{p(!1),x(null)},T={CANCEL_REQUEST:"취소 신청",CANCEL_COMPLETE:"취소 완료",CANCEL_REJECTED:"취소 반려",RETURN_REQUEST:"반품 신청",RETURN_COMPLETE:"반품 완료",RETURN_REJECTED:"반품 반려",EXCHANGE_REQUEST:"교환 신청",EXCHANGE_COMPLETE:"교환 완료",EXCHANGE_REJECTED:"교환 반려"};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col ml-10 mr-10 mt-10 relative",children:[e.jsx("button",{className:"absolute w-20 top-0 left-0 bg-gray-400 text-white rounded",onClick:()=>C("승인"),disabled:o===null,children:"승인"}),e.jsx("button",{className:"absolute w-20 top-0 left-24 bg-gray-400 text-white rounded",onClick:()=>C("반려"),disabled:o===null,children:"반려"}),e.jsxs("table",{id:"list",className:"border border-gray-400 mt-8",children:[e.jsxs("tr",{className:"bg-gray-400",children:[e.jsx("th",{}),e.jsx("th",{children:"요청ID"}),e.jsx("th",{children:"고객ID"}),e.jsx("th",{children:"주문ID"}),e.jsx("th",{children:"요청유형"}),e.jsx("th",{children:"요청날짜"})]}),c.length===0?e.jsx("tr",{}):c.map(s=>e.jsxs("tr",{className:"text-center hover:bg-gray-100 cursor-pointer",onClick:()=>g(s),children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",checked:o===s.claimId,onClick:r=>r.stopPropagation(),onChange:r=>{r.target.checked?l(s.claimId):l(null)}})}),e.jsx("td",{children:s.claimId}),e.jsx("td",{children:s.orderReturn.memberId}),e.jsx("td",{children:s.orderReturn.orderId}),e.jsx("td",{children:T[s.orderReturn.returnType]??s.orderReturn.returnType}),e.jsx("td",{children:new Date(s.orderReturn.regDate).toLocaleDateString()})]},s.claimId))]}),e.jsx(D,{currentPage:a,totalPages:u,onPageChange:E})]}),e.jsxs(b,{isOpen:R,onRequestClose:j,overlayClassName:"fixed inset-0 bg-black bg-transparent flex justify-center items-center",className:"relative bg-white w-9/20 border rounded-lg overflow-auto mx-auto",style:{content:{top:"1%",left:"1%",right:"1%"}},children:[e.jsx("button",{className:"absolute top-1 right-1 text-5xl text-gray-600 hover:text-gray-900",onClick:j,children:"×"}),m&&e.jsx(f,{claimManage:m})]})]})},S=()=>{const[t,a]=n.useState({searchType:"",searchContent:"",returnType:"",startDate:"",endDate:""}),[E,c]=n.useState(0),[d,u]=n.useState(t),i=()=>{console.log(t),u(t),c(0)},o=l=>{c(l)};return e.jsxs(y,{children:[e.jsxs("div",{className:"space-y-2 ml-10 mt-10",children:["검색유형:",e.jsxs("select",{value:t.searchType,onChange:l=>a({...t,searchType:l.target.value}),className:"border ml-2 p-1",children:[e.jsx("option",{value:"주문 ID",children:"주문 ID"}),e.jsx("option",{value:"고객 ID",children:"고객 ID"})]}),e.jsx("input",{type:"text",value:t.searchContent,onChange:l=>a({...t,searchContent:l.target.value}),className:"border ml-2 p-1"}),"고객 요청 유형:",e.jsxs("select",{value:t.returnType,onChange:l=>a({...t,returnType:l.target.value}),className:"border ml-2 p-1",children:[e.jsx("option",{value:"CANCEL_REQUEST",children:"취소신청"}),e.jsx("option",{value:"CANCEL_COMPLETE",children:"취소완료"}),e.jsx("option",{value:"CANCEL_REJECTED",children:"취소반려"}),e.jsx("option",{value:"RETURN_REQUEST",children:"반품신청"}),e.jsx("option",{value:"RETURN_COMPLETE",children:"반품완료"}),e.jsx("option",{value:"RETURN_REJECTED",children:"반품반려"}),e.jsx("option",{value:"EXCHANGE_REQUEST",children:"교환신청"}),e.jsx("option",{value:"EXCHANGE_COMPLETE",children:"교환완료"}),e.jsx("option",{value:"EXCHANGE_REJECTED",children:"교환반려"})]}),"요청일자:",e.jsx("input",{type:"date",value:t.startDate,onChange:l=>a({...t,startDate:l.target.value}),className:"border ml-2 p-1"}),e.jsx("input",{type:"date",value:t.endDate,onChange:l=>a({...t,endDate:l.target.value}),className:"border ml-2 p-1"})]}),e.jsx("button",{className:"bg-blue-500 text-white px-4 py-1 ml-10 rounded",onClick:i,children:"검색"}),e.jsx(L,{searchFilters:d,currentPage:E,onPageChange:o})]})};export{S as default};
