import{j as e,L as N,b as k,c as v,u as C,r as m,A as S}from"./index-BriUKL8v.js";import{g as w,d as L}from"./FaqApi-jHAwzo12.js";const F=({faq:t,index:u,isChecked:x,onCheck:l})=>{const h=a=>a?new Date(a).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"}):"-";return e.jsxs("tr",{className:"border",children:[e.jsx("td",{className:"px-2 text-center",children:e.jsx("input",{type:"checkbox",checked:x,onChange:()=>l(t.id)})}),e.jsx("td",{className:"border px-2 text-center",children:u}),e.jsx("td",{className:"border px-2 text-center",children:t.category}),e.jsx("td",{className:"border px-2 text-black-900 hover:underline",children:e.jsx(N,{to:`/admin/faq/detail/${t.id}`,children:t.question})}),e.jsx("td",{className:"border px-2 text-center",children:h(t.createdAt)})]})},z=({searchParams:t,setSearchParams:u,onSearch:x})=>{const l=a=>{const{name:c,value:o}=a.target;u({...t,[c]:o})},h=a=>{var s,i;a.preventDefault();const c=(s=t.category)==null?void 0:s.trim(),o=(i=t.keyWord)==null?void 0:i.trim();if(!c){alert("카테고리를 선택하세요");return}x({category:c,keyWord:o})};return e.jsxs("form",{onSubmit:h,className:"flex items-center space-x-4 mb-4",children:[e.jsxs("select",{name:"category",value:t.category,onChange:l,className:"border px-2 py-1 rounded",children:[e.jsx("option",{value:"",children:"카테고리 선택"}),e.jsx("option",{value:"배송",children:"배송"}),e.jsx("option",{value:"취소/교환/반품",children:"취소/교환/반품"}),e.jsx("option",{value:"환불",children:"환불"}),e.jsx("option",{value:"주문/결제",children:"주문/결제"}),e.jsx("option",{value:"기타",children:"기타"})]}),e.jsx("input",{type:"text",name:"keyWord",value:t.keyWord,onChange:l,placeholder:"검색어 입력",className:"border px-2 py-1 rounded w-60"}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-1 rounded hover:bg-blue-600",children:"검색"})]})},D=({currentPage:t,totalCount:u,pageSize:x,onPageChange:l})=>{const h=Math.ceil(u/x),a=10,o=Math.floor((t-1)/a)*a+1,s=Math.min(o+a-1,h),i=[];for(let d=o;d<=s;d++)i.push(d);return e.jsxs("div",{className:"flex justify-center mt-4 space-x-2",children:[o>1&&e.jsx("button",{onClick:()=>l(o-1),className:"px-2 py-1 border rounded hover:bg-gray-100",children:"이전"}),i.map(d=>e.jsx("button",{onClick:()=>l(d),className:`px-3 py-1 border rounded ${t===d?"bg-blue-500 text-white":"hover:bg-gray-100"}`,children:d},d)),s<h&&e.jsx("button",{onClick:()=>l(s+1),className:"px-2 py-1 border rounded hover:bg-gray-100",children:"다음"})]})},q=()=>{const t=k();v();const u=C(),[x,l]=m.useState([]),[h,a]=m.useState(0),[c,o]=m.useState([]),[s,i]=m.useState({category:"",keyWord:"",page:1,size:10}),[d,g]=m.useState(!1),j=r=>{o(n=>n.includes(r)?n.filter(p=>p!==r):[...n,r])},b=async(r=s)=>{try{const n=await w(r);l(n.dtoList||[]),a(n.totalCount||0)}catch(n){console.error("FAQ 목록을 불러오는데 실패했습니다.",n)}},y=({category:r,keyWord:n})=>{g(!0);const p={category:r,keyWord:n,page:1,size:10};i(p),b(p)};m.useEffect(()=>{b(),g(!1)},[s.page,s.size]);const f=async()=>{if(c.length===0){alert("삭제할 항목을 선택하세요.");return}if(window.confirm("정말로 삭제하시겠습니까?"))try{await L(c,u),alert("삭제가 완료 되었습니다"),o([]),b()}catch(n){console.log("삭제 실패",n),alert("삭제 중 오류가 발생했습니다")}};return e.jsx(S,{children:e.jsx("div",{className:"flex justify-center p-8",children:e.jsxs("div",{className:"w-full max-w-5xl text-left",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"FAQ 목록"}),e.jsx(z,{searchParams:s,setSearchParams:i,onSearch:y}),e.jsxs("table",{className:"w-full border",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray=100 text-left",children:[e.jsx("th",{className:"border px-2",children:"선택"}),e.jsx("th",{className:"border px-2",children:"번호"}),e.jsx("th",{className:"border px-2",children:"분류"}),e.jsx("th",{className:"border px-2",children:"제목"}),e.jsx("th",{className:"border px-2",children:"작성일"})]})}),e.jsx("tbody",{children:x.length>0?x.map((r,n)=>e.jsx(F,{faq:r,index:n+1+(s.page-1)*s.size,isChecked:c.includes(r.id),onCheck:j},r.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"text-center py-4",children:"FAQ가 없습니다."})})})]}),e.jsxs("div",{className:"my-4 flex justify-between items-center",children:[e.jsx("button",{className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600",onClick:f,disabled:c.length===0,children:"삭제"}),e.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:()=>t("/admin/faq/register"),children:"등록하기"})]}),e.jsx(D,{currentPage:s.page,totalCount:h,pageSize:s.size,onPageChange:r=>i({...s,page:r})})]})})})};export{q as default};
