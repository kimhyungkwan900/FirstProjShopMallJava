import{j as e,L as N,u as f,b as v,r as m,A as k}from"./index-DL8XAv-9.js";import{g as S,d as C}from"./FaqApi-C2NEp9rC.js";const w=({faq:s,index:d,isChecked:x,onCheck:o})=>{const h=r=>r?new Date(r).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"}):"-";return e.jsxs("tr",{className:"border",children:[e.jsx("td",{className:"px-2 text-center",children:e.jsx("input",{type:"checkbox",checked:x,onChange:()=>o(s.id)})}),e.jsx("td",{className:"border px-2 text-center",children:d}),e.jsx("td",{className:"border px-2 text-center",children:s.category}),e.jsx("td",{className:"border px-2 text-blue-600 hover:underline",children:e.jsx(N,{to:`/admin/faq/detail/${s.id}`,children:s.question})}),e.jsx("td",{className:"border px-2 text-center",children:h(s.createdAt)})]})},L=({searchParams:s,setSearchParams:d,onSearch:x})=>{const o=r=>{const{name:i,value:t}=r.target;d({...s,[i]:t})},h=r=>{var l,u;r.preventDefault();const i=(l=s.category)==null?void 0:l.trim(),t=(u=s.keyWord)==null?void 0:u.trim();if(!i){alert("ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ì„¸ìš”");return}x({category:i,keyWord:t})};return e.jsxs("form",{onSubmit:h,className:"flex items-center space-x-4 mb-4",children:[e.jsxs("select",{name:"category",value:s.category,onChange:o,className:"border px-2 py-1 rounded",children:[e.jsx("option",{value:"",children:"ì¹´í…Œê³ ë¦¬ ì„ íƒ"}),e.jsx("option",{value:"ë°°ì†¡",children:"ë°°ì†¡"}),e.jsx("option",{value:"ì·¨ì†Œ/êµí™˜/ë°˜í’ˆ",children:"ì·¨ì†Œ/êµí™˜/ë°˜í’ˆ"}),e.jsx("option",{value:"í™˜ë¶ˆ",children:"í™˜ë¶ˆ"}),e.jsx("option",{value:"ì£¼ë¬¸/ê²°ì œ",children:"ì£¼ë¬¸/ê²°ì œ"}),e.jsx("option",{value:"ê¸°íƒ€",children:"ê¸°íƒ€"})]}),e.jsx("input",{type:"text",name:"keyWord",value:s.keyWord,onChange:o,placeholder:"ê²€ìƒ‰ì–´ ìž…ë ¥",className:"border px-2 py-1 rounded w-60"}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-1 rounded hover:bg-blue-600",children:"ê²€ìƒ‰"})]})},F=({currentPage:s,totalCount:d,pageSize:x,onPageChange:o})=>{const h=Math.ceil(d/x),r=10,t=Math.floor((s-1)/r)*r+1,l=Math.min(t+r-1,h),u=[];for(let c=t;c<=l;c++)u.push(c);return e.jsxs("div",{className:"flex justify-center mt-4 space-x-2",children:[t>1&&e.jsx("button",{onClick:()=>o(t-1),className:"px-2 py-1 border rounded hover:bg-gray-100",children:"ì´ì „"}),u.map(c=>e.jsx("button",{onClick:()=>o(c),className:`px-3 py-1 border rounded ${s===c?"bg-blue-500 text-white":"hover:bg-gray-100"}`,children:c},c)),l<h&&e.jsx("button",{onClick:()=>o(l+1),className:"px-2 py-1 border rounded hover:bg-gray-100",children:"ë‹¤ìŒ"})]})},A=()=>{const s=f();v();const[d,x]=m.useState([]),[o,h]=m.useState(0),[r,i]=m.useState([]),[t,l]=m.useState({category:"",keyWord:"",page:1,size:10}),[u,c]=m.useState(!1),g=n=>{i(a=>a.includes(n)?a.filter(p=>p!==n):[...a,n])},b=async(n=t)=>{console.log("ðŸ“¦ ìš”ì²­ searchParams:",n);try{const a=await S(n);console.log("ðŸ“¦ ë°›ì•„ì˜¨ ì‘ë‹µ:",a),x(a.dtoList||[]),h(a.totalCount||0)}catch(a){console.error("FAQ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",a)}},j=({category:n,keyWord:a})=>{c(!0);const p={category:n,keyWord:a,page:1,size:10};l(p),b(p)};m.useEffect(()=>{b(),c(!1)},[t.page,t.size]);const y=async()=>{if(r.length===0){alert("ì‚­ì œí•  í•­ëª©ì„ ì„ íƒí•˜ì„¸ìš”.");return}if(window.confirm("ì •ë§ë¡œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"))try{await C(r),alert("ì‚­ì œê°€ ì™„ë£Œ ë˜ì—ˆìŠµë‹ˆë‹¤"),i([]),b()}catch(a){console.log("ì‚­ì œ ì‹¤íŒ¨",a),alert("ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤")}};return e.jsx(k,{children:e.jsxs("div",{className:"p-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"FAQ ëª©ë¡"}),e.jsx(L,{searchParams:t,setSearchParams:l,onSearch:j}),e.jsxs("table",{className:"w-full border",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray=100 text-left",children:[e.jsx("th",{className:"border px-2",children:"ì„ íƒ"}),e.jsx("th",{className:"border px-2",children:"ë²ˆí˜¸"}),e.jsx("th",{className:"border px-2",children:"ë¶„ë¥˜"}),e.jsx("th",{className:"border px-2",children:"ì œëª©"}),e.jsx("th",{className:"border px-2",children:"ìž‘ì„±ì¼"})]})}),e.jsx("tbody",{children:d.length>0?d.map((n,a)=>e.jsx(w,{faq:n,index:a+1+(t.page-1)*t.size,isChecked:r.includes(n.id),onCheck:g},n.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"text-center py-4",children:"FAQê°€ ì—†ìŠµë‹ˆë‹¤."})})})]}),e.jsxs("div",{className:"my-4 flex justify-between items-center",children:[e.jsx("button",{className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600",onClick:y,disabled:r.length===0,children:"ì‚­ì œ"}),e.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:()=>s("/admin/faq/register"),children:"ë“±ë¡í•˜ê¸°"})]}),e.jsx(F,{currentPage:t.page,totalCount:o,pageSize:t.size,onPageChange:n=>l({...t,page:n})})]})})};export{A as default};
